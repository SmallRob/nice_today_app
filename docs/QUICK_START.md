# Nice Today 应用快速验证指南

## 📦 构建状态

- ✅ 前端已构建完成
- ✅ 前端文件已复制到 electron/public/
- 🔄 Electron应用构建中（可能需要几分钟）

## 🚀 快速验证步骤

### 步骤1：检查构建是否完成

```powershell
# 进入项目目录
cd E:\WorkSource\nice_today_app

# 检查构建输出
dir electron\dist
```

**预期结果：**
- 看到 `win-unpacked` 文件夹
- 可能看到 `Nice Today Setup 1.0.0.exe` 安装程序

### 步骤2：运行应用（如果构建完成）

```powershell
# 方法1：直接运行未打包版本
cd electron\dist\win-unpacked
.\Nice Today.exe

# 方法2：如果已安装，从开始菜单启动
```

### 步骤3：验证关键功能

启动应用后，请检查以下内容：

#### ✅ 必须验证项（核心功能）

1. **应用启动**
   - [ ] 应用能够启动，显示主窗口
   - [ ] 无白屏或错误提示

2. **默认数据自动加载** ⭐ **最重要**
   - [ ] 页面加载后，**自动显示**默认出生日期（1991-01-01）的生物节律数据
   - [ ] 不需要手动操作，数据应该自动出现
   - [ ] 生物节律图表正常显示
   - [ ] 今日数据正常显示

3. **服务状态**
   - [ ] 页面顶部显示"✅ 所有服务就绪"（或类似提示）
   - [ ] 如果显示警告，记录具体信息

4. **数据计算**
   - [ ] 选择一个新日期，数据能够更新
   - [ ] 图表能够正确显示

#### ⚠️ 如果发现问题

**问题1：应用无法启动**
- 检查是否有错误提示
- 尝试以管理员身份运行

**问题2：页面白屏**
- 按 `F12` 打开开发者工具
- 查看 Console 标签的错误信息
- 查看 Network 标签，检查资源加载

**问题3：数据未自动加载** ⚠️ **这是我们要修复的核心问题**
- 打开开发者工具（F12）
- 查看 Console 标签
- 查找以下关键词的错误：
  - "electronAPI"
  - "服务未就绪"
  - "无法获取数据"
  - "loadBiorhythmData"
- 记录所有错误信息

**问题4：服务未就绪**
- 查看控制台日志
- 检查是否有服务初始化错误
- 验证 electronAPI 是否可用

### 步骤4：收集调试信息（如果出现问题）

如果应用无法正常工作，请收集以下信息：

1. **控制台错误**
   - 按 F12 打开开发者工具
   - 截图 Console 标签的所有错误
   - 截图 Network 标签的失败请求

2. **应用日志**
   - 检查 `electron/dist/win-unpacked/debug.log`（如果存在）
   - 检查 Windows 事件查看器

3. **环境信息**
   - Windows 版本
   - 是否安装了 Python
   - 是否有防病毒软件阻止

## 📋 完整验证清单

### 基础功能
- [ ] 应用能够启动
- [ ] 窗口正常显示
- [ ] 无JavaScript错误

### 核心功能（最重要）
- [ ] **默认数据自动加载** ⭐
- [ ] 服务状态正常显示
- [ ] 生物节律图表正常
- [ ] 数据计算正确

### 交互功能
- [ ] 日期选择器可用
- [ ] 选择日期后数据更新
- [ ] 标签切换正常

### 其他功能
- [ ] 深色模式切换
- [ ] 玛雅日历功能
- [ ] 穿衣建议功能

## 🔧 重新构建（如果需要）

如果构建失败或需要重新构建：

```powershell
# 1. 停止所有相关进程
Get-Process | Where-Object {$_.Path -like "*nice_today_app*"} | Stop-Process -Force

# 2. 清理构建目录
Remove-Item -Recurse -Force electron\dist -ErrorAction SilentlyContinue

# 3. 重新构建前端（如果需要）
cd frontend
npm run build
cd ..

# 4. 复制前端文件
Copy-Item -Recurse -Force frontend\build\* electron\public\

# 5. 构建Electron应用
cd electron
npm run dist
```

## 📝 验证结果记录

完成验证后，请记录：

- [ ] 构建是否成功
- [ ] 应用是否能够启动
- [ ] **默认数据是否自动加载** ⭐
- [ ] 发现的问题（如有）
- [ ] 错误信息（如有）

---

**注意：** 本次修复的核心目标是确保应用启动后**自动加载并显示默认的生物节律数据**，无需用户手动操作。如果这个功能不正常，请详细记录错误信息。

